<!DOCTYPE html>
<html lang="en">
<head>
<title>{$goods.name}</title>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="aStar Fashion Template Project">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" type="text/css" href="__STATIC__/index/styles/bootstrap-4.1.3/bootstrap.css">
<link href="__STATIC__/index/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" type="text/css" href="__STATIC__/index/plugins/OwlCarousel2-2.2.1/owl.carousel.css">
<link rel="stylesheet" type="text/css" href="__STATIC__/index/plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
<link rel="stylesheet" type="text/css" href="__STATIC__/index/plugins/OwlCarousel2-2.2.1/animate.css">
<link rel="stylesheet" type="text/css" href="__STATIC__/index/styles/product.css">
<link rel="stylesheet" type="text/css" href="__STATIC__/index/styles/product_responsive.css">

<link href="__STATIC__/index/styles/bootstrap.css" rel='stylesheet' type='text/css' />

<script src="__STATIC__/index/js/jquery-3.2.1.min.js"></script>
<script src="__STATIC__/layer/layer.js"></script>
<link rel="stylesheet" type="text/css" href="__STATIC__/layer/theme/default/layer.css">

</head>
<body>


<div class="super_container">

	<!-- Header -->
{include file="public/menu" /}
	<!-- Home -->

	<!-- Products -->

	<div class="product">

		<!-- Sorting & Filtering -->
		<div class="products_bar" id="head">
			<div class="section_container">
				<div class="container">
					<div class="row" style="height: 38px">
						<div class="col">
							<div class="products_bar_content d-flex flex-row align-items-center justify-content-start">
								<div class="product_categories">
									<ul class="d-flex flex-row align-items-start justify-content-start flex-wrap" style="margin-bottom: 75px">
										<li ><a href="#" id="sp">商品</a></li>
										<li><a href="#" id="spxq">商品详情</a></li>
										<li><a href="#" id="yhpj">用户评价</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Product Content -->
		<div class="section_container" id="goods">
			<div class="container">
				<div class="row">
					<div class="col">
						<div class="product_content_container d-flex flex-lg-row flex-column align-items-start justify-content-start">
							<div class="product_content order-lg-1 order-2" style="max-width: 600px;">
								<div class="product_content_inner" style="max-width: 600px;">
									<div class="product_image_row" style="background-color: grey;max-width: 550px;">
										<div class="product_image_3 product_image"><img id="image" style="width: 100%;" src="{$goods.img_1}" alt=""></div>
									</div>
									<div class="product_image_row d-flex flex-md-row flex-column align-items-start justify-content-start">
									    <div class="product_image_4 product_image"><img id="preview_1" class="img-thumbnail" style="width:120px;position: relative;bottom: 20px; " src="{$goods.img_1}" alt=""></div>
                                        {if condition="$goods.img_2 neq null"}
                                        <div class="product_image_4 product_image"><img id="preview_2" class="img-thumbnail" style="width:120px;position: relative;right:5px;bottom: 20px; " src="{$goods.img_2}" alt=""></div>
									    {/if}
                                        {if condition="$goods.img_3 neq null"}
                                        <div class="product_image_4 product_image"><img id="preview_3" class="img-thumbnail" style="width:120px;position: relative;right:5px;bottom: 20px; " src="{$goods.img_3}" alt=""></div>
                                        {/if}
                                        {if condition="$goods.img_4 neq null"}
                                        <div class="product_image_4 product_image"><img id="preview_4" class="img-thumbnail" style="width:120px;position: relative;right:5px;bottom: 20px; " src="{$goods.img_4}" alt=""></div>
                                        {/if}
                                    </div>
								</div>
							</div>
							<div class="product_sidebar order-lg-2 order-1">
								<!--<form   id="product_form" class="product_form">-->
								<form method="post" action="{:url('shoppingCart/add')}"  id="product_form" class="product_form">
									<div class="product_name" style="margin-top: 20px">{$goods.name|default="没有名字"}</div>
									<input type="text" name="name" value="{$goods.name}" hidden>
									<input type="text" name="image" value="{$goods.img_1}" hidden>
									<input type="text" name="goods_id" value="{$goods.id}" hidden>
									<div class="product_price">¥ {$goods.price|default="不用钱"} </div>
									<input type="text" name="price" value="{$goods.price}" hidden>

									<div class="product_size"  style="position: relative;bottom:10px;font-size: 17px;color: black ">
										<div class="product_size_title" >颜色</div>
										<div class="product_size_list">
											<input type="radio" id="radio_11" name="color" class="regular_radio radio_1" value="{$goods.color}" checked="checked">
											<label for="radio_11" style="padding-right: 20px;">{$goods.color|default="原色"}</label>
											{if condition="$goods.color_2 neq null"}
											<input type="radio" id="radio_22" name="color" class="regular_radio radio_2" value="{$goods.color_2}">
											<label for="radio_22" style="padding-right: 20px;">{$goods.color_2}</label>
											{/if}
											{if condition="$goods.color_3 neq null"}
											<input type="radio" id="radio_33" name="color" class="regular_radio radio_3" value="{$goods.color_3}">
											<label for="radio_33">{$goods.color_3}</label>
											{/if}
										</div>
									</div>
									<!--清除float-->
									<div>&nbsp</div>
									<div class="product_size" style="position: relative;bottom:50px;">
										<div class="product_size_title">选择尺寸</div>
										<div class="product_size_list">
											<ul>
												{if condition="$goods.size_s eq 0"}
												<li>
													<input type="radio" id="radio_1" name="size" class="regular_radio radio_1" disabled>
													<label for="radio_1">S</label>
												</li>
												{else /}
												<li class="size_available">
													<input type="radio" id="radio_1" name="size" class="regular_radio radio_1" value="s" checked="checked">
													<label for="radio_1">S</label>
												</li>
												{/if}
                                                {if condition="$goods.size_m eq 0"}
                                                <li>
                                                    <input type="radio" id="radio_2" name="size" class="regular_radio radio_2" disabled>
                                                    <label for="radio_2">M</label>
                                                </li>
                                                {else /}
                                                <li class="size_available">
                                                    <input type="radio" id="radio_2" name="size" class="regular_radio radio_2" value="m" checked="checked">
                                                    <label for="radio_2">M</label>
                                                </li>
                                                {/if}
                                                {if condition="$goods.size_l eq 0"}
                                                <li>
                                                    <input type="radio" id="radio_3" name="size" class="regular_radio radio_3" disabled>
                                                    <label for="radio_3">L</label>
                                                </li>
                                                {else /}
                                                <li class="size_available">
                                                    <input type="radio" id="radio_3" name="size" class="regular_radio radio_3" value="l" checked="checked">
                                                    <label for="radio_3">L</label>
                                                </li>
                                                {/if}
                                                {if condition="$goods.size_xl eq 0"}
                                                <li>
                                                    <input type="radio" id="radio_4" name="size" class="regular_radio radio_4" disabled>
                                                    <label for="radio_4">XL</label>
                                                </li>
                                                {else /}
                                                <li class="size_available">
                                                    <input type="radio" id="radio_4" name="size" class="regular_radio radio_4" value="xl" checked="checked">
                                                    <label for="radio_4">XL</label>
                                                </li>
                                                {/if}
                                                {if condition="$goods.size_xxl eq 0"}
                                                <li>
                                                    <input type="radio" id="radio_5" name="size" class="regular_radio radio_5" disabled>
                                                    <label for="radio_5">XXL</label>
                                                </li>
                                                {else /}
                                                <li class="size_available">
                                                    <input type="radio" id="radio_5" name="size" class="regular_radio radio_5" value="xxl">
                                                    <label for="radio_5">XXL</label>
                                                </li>
                                                {/if}
                                            </ul>
										</div>
									</div>
									<input type="text" name="id" value="{$goods.id}" hidden>
									<button id="cart" class="cart_button trans_200" style="position: relative;bottom:70px;">加入购物车</button>
									<!--<div class="similar_products_button trans_200" style="position: relative;bottom:90px;"><a id="cart" href="#">加入购物车</a></div>-->
								</form>

							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!--详细描述-->
	<div class="section_container" id="goods_details">
		<div class="container">
			<div>
				<p style="font-size:10px">商品详情：</p>
				<hr>
				<p style="font-size:10px">注： 商品实际颜色以静物图为准</p>
			</div>
			<div class="row" >
				<img src="{$goods.detail_1}" alt="">
				<img src="{$goods.detail_2}" alt="">
				<img src="{$goods.detail_3}" alt="">
				<img src="{$goods.detail_4}" alt="">
				<img src="{$goods.detail_5}" alt="">
				<img src="{$goods.detail_6}" alt="">
				<img src="{$goods.detail_7}" alt="">
				<img src="{$goods.detail_8}" alt="">
				<img src="{$goods.detail_9}" alt="">
				<img src="{$goods.detail_10}" alt="">
				<img src="{$goods.detail_11}" alt="">
				<img src="{$goods.detail_12}" alt="">
				<img src="{$goods.detail_13}" alt="">
				<img src="{$goods.detail_14}" alt="">
				<img src="{$goods.detail_15}" alt="">
			</div>
		</div>
	</div>

	<!--评论-->
	<div class="section_container" id="comment">
		<div class="container">
			<div>
				<p style="font-size:10px">用户评论：</p>
				<hr>
			</div>
			<div style="">
				<table style="text-align: center" >
					<tr style="border-left: none">
						<td style="width: 100px;;border-bottom: 1px solid  gainsboro"></td>
						<td style="width:120px;height:40px;font-size: 20px;border-left: 1px solid  gainsboro;border-top: 2px solid gainsboro;border-right: 1px solid  gainsboro">评论</td>
						<td style="width: 530px;border-bottom: 1px solid  gainsboro;text-align: left" >
							<form action="{:url('Goods/singleComment')}" id="pj_form">
								{if condition="$pj_status eq 100 or $pj_status eq '全部'"}
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="全部" checked>全部</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="有图">有图({$count_has_img})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="好评">好评({$count_good})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="中评">中评({$count_soso})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="差评">差评({$count_bad})</span>
								{elseif condition="$pj_status eq '有图'"}
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="全部" >全部</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="有图" checked>有图({$count_has_img})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="好评">好评({$count_good})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="中评">中评({$count_soso})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="差评">差评({$count_bad})</span>
								{elseif condition="$pj_status eq '好评'"}
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="全部" >全部</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="有图" >有图({$count_has_img})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="好评" checked>好评({$count_good})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="中评">中评({$count_soso})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="差评">差评({$count_bad})</span>
								{elseif condition="$pj_status eq '中评'"}
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="全部" >全部</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="有图" >有图({$count_has_img})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="好评" >好评({$count_good})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="中评" checked>中评({$count_soso})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="差评">差评({$count_bad})</span>
								{elseif condition="$pj_status eq '差评'"}
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="全部" >全部</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="有图" >有图({$count_has_img})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="好评" >好评({$count_good})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="中评" >中评({$count_soso})</span>
								<span style="padding-left: 20px"><input type="radio" name="pj" class="pj" value="差评" checked>差评({$count_bad})</span>
								{/if}
								<input type="text" name="id" value="{$goods.id}" hidden>
							</form>
						</td>
						<td style="width:150px;border-bottom: 1px solid  gainsboro;">
							<button type="button"  id="comment_btn" class="btn btn-link"  style="color: #0a6999">我要评论</button>
						</td>
					</tr>
				</table>
			</div>
				<div>
					<ul>
						{volist name="comment" id="comment"}
						<li>
							<table style="margin-left: 200px;border-color: gainsboro;" >
								<tr>
									<td style="height: 20px;text-align: center;width: 100px">
										<img src="{$comment.member_touxiang}" alt="头像"  class="img-circle" style="width: 45px;margin-top:20px">
										<p style="color: black;font-size: 14px;margin-top: 4 px;">{$comment.member_name}</p>
									</td>
									<td   width="450px" style="padding: 5px;color: black;font-size: 15px">
										<div id="layer-photos{$i}">
											{if condition="$comment.image_1 neq null"}
											<img src="{$comment.image_1}"  layer-src="{$comment.image_1}" class="img-thumbnail" style="width: 60px;height:60px;margin: 5px">
											{/if}
											{if condition="$comment.image_2 neq null"}
											<img src="{$comment.image_2}"  layer-src="{$comment.image_2}" class="img-thumbnail" style="width: 60px;height:60px;margin: 5px">
											{/if}
											{if condition="$comment.image_3 neq null"}
											<img src="{$comment.image_3}"  layer-src="{$comment.image_3}" class="img-thumbnail" style="width: 60px;height:60px;margin: 5px">
											{/if}
											{if condition="$comment.image_4 neq null"}
											<img src="{$comment.image_4}"  layer-src="{$comment.image_4}" class="img-thumbnail" style="width: 60px;height:60px;margin: 5px">
											{/if}
										</div>
										<script>
											layer.photos({
												photos:'#layer-photos{$i}',
												anim:0,
                                                area: ['auto', 'auto'],
											});
										</script>
										<div>{$comment.content}</div>
									</td>
								</tr>
								<tr style="border-bottom: solid 1px gainsboro">
									<td style="border-top: hidden"></td>
									<td>
										<p>
											<spqn style="padding-left: 5px">{:date("Y-m-d h:i",$comment.time)}</spqn>
											<span style="padding-left: 35px">颜色:黑色</span>
											<span style="padding-left: 35px">尺码:XXL</span>
										</p>
									</td>
								</tr>
							</table>
						</li>
						{/volist}
						{if condition="$comment eq null"}
						<li>
							<table style="margin-left: 200px;border-color: gainsboro" >
								<tr>
									<td style="height: 100px;text-align: center;width: 100px">
										<p>暂时没有评论~~</p>
									</td>
								</tr>
							</table>
						</li>
						{/if}
					</ul>
				</div>

			<div style="width: 1000px;height: 350px;margin-top: 50px;" >

			</div>

		</div>
	</div>



</div>


{include file="public/last" /}
<script src="__STATIC__/index/styles/bootstrap-4.1.3/popper.js"></script>
<script src="__STATIC__/index/styles/bootstrap-4.1.3/bootstrap.min.js"></script>
<script src="__STATIC__/index/plugins/greensock/TweenMax.min.js"></script>
<script src="__STATIC__/index/plugins/greensock/TimelineMax.min.js"></script>
<script src="__STATIC__/index/plugins/scrollmagic/ScrollMagic.min.js"></script>
<script src="__STATIC__/index/plugins/greensock/animation.gsap.min.js"></script>
<script src="__STATIC__/index/plugins/greensock/ScrollToPlugin.min.js"></script>
<script src="__STATIC__/index/plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
<script src="__STATIC__/index/plugins/easing/easing.js"></script>
<script src="__STATIC__/index/plugins/parallax-js-master/parallax.min.js"></script>
<script src="__STATIC__/index/plugins/Isotope/isotope.pkgd.min.js"></script>
<script src="__STATIC__/index/plugins/Isotope/fitcolumns.js"></script>
<script src="__STATIC__/index/js/product.js"></script>
<script src="__STATIC__/index/js/bootstrap.js"> </script>

<!--评价查看-->
<script>
	$(function(){
	    $(".pj").change(function () {
			$("#pj_form").submit();
        })
	})
</script>

<!--商品四张预览图-->
<script>
    $(function(){
        $('#preview_1').hover(function(){
            $('#image').attr("src", "{$goods.img_1}");
        })
    })
    $(function(){
	    $('#preview_2').hover(function(){
			$('#image').attr("src", "{$goods.img_2}");
		})
	})
    $(function(){
        $('#preview_3').hover(function(){
            $('#image').attr("src", "{$goods.img_3}");
        })
    })
    $(function(){
        $('#preview_4').hover(function(){
            $('#image').attr("src", "{$goods.img_4}");
        })
    })
</script>

<!--吸顶 head-->
<script>

    $(function() {

        var titleTop = $('#head').offset().top;

        $(document).on('scroll', function () {
            if ($(document).scrollTop() > titleTop) {
                $('#head').css({
                    "position": "fixed",
                    "top": 0
                })
            } else {
                $('.title').css({
                    "position": "absolute",
                    "top": "20px"
                })
            }
        })
    })
</script>

<!--回到商品位置-->
<script>
	$(function () {
		var goodsDetails = $('#goods_details').offset().top;

		$("#sp").on('click',function(){
            var timer =setInterval(function(){
                window.scrollBy(0, -100)
            },10)
            $(window).scroll(function () {
                if($(document).scrollTop() === 0){
                    clearInterval(timer);
                }
            })
            return false;
		})
    })
</script>

<!--回到商品详情的位置-->
<script>
    $(function () {
        var goodsDetails = $('#goods_details').offset().top;
        var window_height = document.documentElement.scrollHeight - document.documentElement.clientHeight -50;

        $("#spxq").on('click',function(){
			if($(document).scrollTop() < goodsDetails){
				var timer =setInterval(function(){
				    window.scrollBy(0, 100)
				},10)
                $(window).scroll(function () {
                    if($(document).scrollTop() > goodsDetails || $(document).scrollTop() > window_height){
                        clearInterval(timer);
                    }
                })
			}
            if($(document).scrollTop() > goodsDetails){
                var timer =setInterval(function(){
                    window.scrollBy(0, -100)
                },10)
                $(window).scroll(function () {
                    if($(document).scrollTop() < goodsDetails){
                        clearInterval(timer);
                    }
                })
            }
            return false;
        })
    })
</script>
<!--回到用户评价的位置-->
<script>
    $(function () {
        var comment = $('#comment').offset().top;
		var window_height = document.documentElement.scrollHeight - document.documentElement.clientHeight -50;

        $("#yhpj").on('click',function(){
            if($(document).scrollTop() < comment){
                var timer =setInterval(function(){
                    window.scrollBy(0, 100)
                },10)
                $(window).scroll(function () {
                    if($(document).scrollTop() > comment  || $(document).scrollTop() > window_height){
                        clearInterval(timer);
                    }
                })
            }
            if($(document).scrollTop() > comment){
                var timer =setInterval(function(){
                    window.scrollBy(0, -100)
                },10)
                $(window).scroll(function () {
                    if($(document).scrollTop() < comment ){
                        clearInterval(timer);
                    }
                })
            }

            return false;
        })
    })
</script>

<!--发表评论-->
<script>
    $(function () {
        $("#comment_btn").on('click',function () {
            $.ajax({
				type:'post',
				url:'{:url("goods/commentRight",["goods_id"=>$goods.id])}',
				success:function(data){
					if(data.status == 0){
						layer.msg('购买后才能参与评论');
					}else{
                        layer.open({
                            title:"发表评论",
                            type: 2,
                            area: ['500px','320px'], //宽高
                            content:"{:url('goods/commentPage',['goods_id'=>$goods.id])}",
                        });
					}
				}
			})
            return false;
        })
    })
</script>
<script>
	$(document).scrollTop($("#comment").offset().top);
</script>
</body>
</html>